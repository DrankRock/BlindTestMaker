<UserControl
    x:Class="YoutubeDownloader.Views.Dialogs.AudioVisualizationSettingsView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dialogs="clr-namespace:YoutubeDownloader.ViewModels.Dialogs"
    xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
    Width="480"
    x:DataType="dialogs:AudioVisualizationSettingsViewModel">
    <Grid RowDefinitions="Auto,*,Auto">
        <TextBlock
            Grid.Row="0"
            Margin="16"
            FontSize="19"
            FontWeight="Light"
            Text="Audio Visualization Settings" />

        <Border
            Grid.Row="1"
            Padding="0,8"
            BorderBrush="{DynamicResource MaterialDividerBrush}"
            BorderThickness="0,1">
            <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                <StackPanel Orientation="Vertical">
                   
                    <DockPanel
                        Margin="16,8"
                        LastChildFill="False"
                        ToolTip.Tip="Select the type of audio visualization to generate">
                        <TextBlock DockPanel.Dock="Left" Text="Visualization Mode" />
                        <ComboBox
                            Width="180"
                            DockPanel.Dock="Right"
                            ItemsSource="{Binding AvailableVisualizationModes}"
                            SelectedItem="{Binding VisualizationMode}" />
                    </DockPanel>

                    <DockPanel
                        Margin="16,8"
                        LastChildFill="False"
                        ToolTip.Tip="Select the color scheme for the visualization">
                        <TextBlock DockPanel.Dock="Left" Text="Color Mode" />
                        <ComboBox
                            Width="180"
                            DockPanel.Dock="Right"
                            ItemsSource="{Binding AvailableColorModes}"
                            SelectedItem="{Binding ColorMode}" />
                    </DockPanel>

                    <DockPanel
                        Margin="16,8"
                        LastChildFill="False"
                        ToolTip.Tip="Number of seconds between each video when processing multiple files">
                        <TextBlock DockPanel.Dock="Left" Text="Interval Between Videos (seconds)" />
                        <NumericUpDown
                            Width="100"
                            DockPanel.Dock="Right"
                            Maximum="300"
                            Minimum="0"
                            Value="{Binding IntervalBetweenVideos}" />
                    </DockPanel>

                    <StackPanel Margin="16,8" Orientation="Vertical">
                        <DockPanel LastChildFill="False" ToolTip.Tip="Optional background video to overlay visualization on">
                            <TextBlock DockPanel.Dock="Left" Text="Background Video" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" Spacing="4">
                                <Button
                                    Padding="4"
                                    Command="{Binding ClearBackgroundVideoCommand}"
                                    IsEnabled="{Binding BackgroundVideoPath, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                    Theme="{DynamicResource MaterialFlatButton}"
                                    ToolTip.Tip="Clear background video">
                                    <materialIcons:MaterialIcon Kind="Close" Width="16" Height="16" />
                                </Button>
                                <Button
                                    Padding="4"
                                    Command="{Binding BrowseBackgroundVideoCommand}"
                                    Theme="{DynamicResource MaterialFlatButton}"
                                    ToolTip.Tip="Browse for background video">
                                    <materialIcons:MaterialIcon Kind="FolderOpen" Width="16" Height="16" />
                                </Button>
                            </StackPanel>
                        </DockPanel>
                        <TextBox
                            Margin="0,4,0,0"
                            Text="{Binding BackgroundVideoPath}"
                            Watermark="No background video selected"
                            IsReadOnly="True"
                            TextWrapping="Wrap"
                            MaxLines="2"
                            FontSize="12"
                            Foreground="{DynamicResource MaterialBodyBrush}"
                            Background="Transparent"
                            BorderThickness="0" />
                    </StackPanel>

                    <StackPanel Margin="16,8" Orientation="Vertical">
                        <DockPanel LastChildFill="False" ToolTip.Tip="Optional background image to overlay visualization on">
                            <TextBlock DockPanel.Dock="Left" Text="Background Image" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" Spacing="4">
                                <Button
                                    Padding="4"
                                    Command="{Binding ClearBackgroundImageCommand}"
                                    IsEnabled="{Binding BackgroundImagePath, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                    Theme="{DynamicResource MaterialFlatButton}"
                                    ToolTip.Tip="Clear background image">
                                    <materialIcons:MaterialIcon Kind="Close" Width="16" Height="16" />
                                </Button>
                                <Button
                                    Padding="4"
                                    Command="{Binding BrowseBackgroundImageCommand}"
                                    Theme="{DynamicResource MaterialFlatButton}"
                                    ToolTip.Tip="Browse for background image">
                                    <materialIcons:MaterialIcon Kind="Image" Width="16" Height="16" />
                                </Button>
                            </StackPanel>
                        </DockPanel>
                        <TextBox
                            Margin="0,4,0,0"
                            Text="{Binding BackgroundImagePath}"
                            Watermark="No background image selected"
                            IsReadOnly="True"
                            TextWrapping="Wrap"
                            MaxLines="2"
                            FontSize="12"
                            Foreground="{DynamicResource MaterialBodyBrush}"
                            Background="Transparent"
                            BorderThickness="0" />
                    </StackPanel>

                    <Separator Margin="16,16,16,8" />
                    <TextBlock 
                        Margin="16,0,16,8" 
                        FontWeight="SemiBold" 
                        Text="Visualization Settings" 
                        FontSize="14" />

                    <DockPanel
                        Margin="16,8"
                        LastChildFill="False"
                        ToolTip.Tip="Zoom level for the visualization (0.1x to 5.0x)">
                        <TextBlock DockPanel.Dock="Left" Text="Zoom Level" />
                        <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                            <TextBlock Margin="10,0" Text="{Binding ZoomLevel, StringFormat='{}{0:F1}x'}" />
                            <Slider
                                Width="120"
                                Maximum="5.0"
                                Minimum="0.1"
                                TickFrequency="0.1"
                                Value="{Binding ZoomLevel}" />
                        </StackPanel>
                    </DockPanel>

                    <DockPanel
                        Margin="16,8"
                        LastChildFill="False"
                        ToolTip.Tip="Horizontal position offset (-1.0 to 1.0)">
                        <TextBlock DockPanel.Dock="Left" Text="X Position" />
                        <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                            <TextBlock Margin="10,0" Text="{Binding XPosition, StringFormat='{}{0:F2}'}" />
                            <Slider
                                Width="120"
                                Maximum="1.0"
                                Minimum="-1.0"
                                TickFrequency="0.1"
                                Value="{Binding XPosition}" />
                        </StackPanel>
                    </DockPanel>

                    <DockPanel
                        Margin="16,8"
                        LastChildFill="False"
                        ToolTip.Tip="Vertical position offset (-1.0 to 1.0)">
                        <TextBlock DockPanel.Dock="Left" Text="Y Position" />
                        <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                            <TextBlock Margin="10,0" Text="{Binding YPosition, StringFormat='{}{0:F2}'}" />
                            <Slider
                                Width="120"
                                Maximum="1.0"
                                Minimum="-1.0"
                                TickFrequency="0.1"
                                Value="{Binding YPosition}" />
                        </StackPanel>
                    </DockPanel>

                    <StackPanel IsVisible="{Binding IsBasicWaveformMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="Waveform Settings" 
                            FontSize="13" />
                       
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Amplitude multiplier for waveform display">
                            <TextBlock DockPanel.Dock="Left" Text="Wave Amplitude" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding WaveAmplitude, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="3.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding WaveAmplitude}" />
                            </StackPanel>
                        </DockPanel>

                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Frequency multiplier for waveform oscillation">
                            <TextBlock DockPanel.Dock="Left" Text="Wave Frequency" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding WaveFrequency, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="5.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding WaveFrequency}" />
                            </StackPanel>
                        </DockPanel>
                    </StackPanel>

                    <StackPanel IsVisible="{Binding IsCircularWaveMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="Circular Wave Settings" 
                            FontSize="13" />
                       
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Amplitude multiplier for circular waves">
                            <TextBlock DockPanel.Dock="Left" Text="Wave Amplitude" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding WaveAmplitude, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="3.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding WaveAmplitude}" />
                            </StackPanel>
                        </DockPanel>
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Line thickness for circular waves">
                            <TextBlock DockPanel.Dock="Left" Text="Line Thickness" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding LineThickness}" />
                                <Slider
                                    Width="120"
                                    IsSnapToTickEnabled="True"
                                    Maximum="50"
                                    Minimum="1"
                                    TickFrequency="0.5"
                                    Value="{Binding LineThickness}" />
                            </StackPanel>
                        </DockPanel>
                        <StackPanel Margin="16,8" Orientation="Vertical">
                            <DockPanel LastChildFill="False" ToolTip.Tip="Optional PNG image for the center of the circular wave">
                                <TextBlock DockPanel.Dock="Left" Text="Circle Background Picture" />
                                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" Spacing="4">
                                    <Button
                                        Padding="4"
                                        Command="{Binding ClearCircleCenterImageCommand}"
                                        IsEnabled="{Binding CircleCenterImageFilePath, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                        Theme="{DynamicResource MaterialFlatButton}"
                                        ToolTip.Tip="Clear circle background picture">
                                        <materialIcons:MaterialIcon Kind="Close" Width="16" Height="16" />
                                    </Button>
                                    <Button
                                        Padding="4"
                                        Command="{Binding BrowseCircleCenterImageCommand}"
                                        Theme="{DynamicResource MaterialFlatButton}"
                                        ToolTip.Tip="Browse for circle background picture (PNG)">
                                        <materialIcons:MaterialIcon Kind="Image" Width="16" Height="16" />
                                    </Button>
                                </StackPanel>
                            </DockPanel>
                            <TextBox
                                Margin="0,4,0,0"
                                Text="{Binding CircleCenterImageFilePath}"
                                Watermark="No circle background picture selected"
                                IsReadOnly="True"
                                TextWrapping="Wrap"
                                MaxLines="2"
                                FontSize="12"
                                Foreground="{DynamicResource MaterialBodyBrush}"
                                Background="Transparent"
                                BorderThickness="0" />
                        </StackPanel>
                    </StackPanel>

                    <StackPanel IsVisible="{Binding IsSphericalPulseMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="Spherical Pulse Settings" 
                            FontSize="13" />
                       
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Diameter of the spherical pulse visualization">
                            <TextBlock DockPanel.Dock="Left" Text="Sphere Diameter" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding SphereDiameter, StringFormat='{}{0:F1}'}" />
                                <Slider
                                    Width="120"
                                    Maximum="2.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding SphereDiameter}" />
                            </StackPanel>
                        </DockPanel>
                    </StackPanel>

                    <StackPanel IsVisible="{Binding IsSpectrumBarsMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="Spectrum Bars Settings" 
                            FontSize="13" />
                       
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Number of frequency bars to display">
                            <TextBlock DockPanel.Dock="Left" Text="Bar Count" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding BarCount}" />
                                <Slider
                                    Width="120"
                                    IsSnapToTickEnabled="True"
                                    Maximum="2000"
                                    Minimum="10"
                                    TickFrequency="10"
                                    Value="{Binding BarCount}" />
                            </StackPanel>
                        </DockPanel>

                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Spacing between frequency bars">
                            <TextBlock DockPanel.Dock="Left" Text="Bar Spacing" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding BarSpacing, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="2.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding BarSpacing}" />
                            </StackPanel>
                        </DockPanel>
                    </StackPanel>

                    <StackPanel IsVisible="{Binding IsCircularSpectrumBarsMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="Circular Spectrum Bars Settings" 
                            FontSize="13" />

                        <!-- Bar Count -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Number of frequency bars to display in the circle">
                            <TextBlock DockPanel.Dock="Left" Text="Bar Count" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding CircularBarCount}" />
                                <Slider
                                    Width="120"
                                    IsSnapToTickEnabled="True"
                                    Maximum="2000"
                                    Minimum="10"
                                    TickFrequency="10"
                                    Value="{Binding CircularBarCount}" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Amplitude Multiplier -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Multiplier for FFT magnitude to determine bar height">
                            <TextBlock DockPanel.Dock="Left" Text="Amplitude Multiplier" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding CircularAmplitudeMultiplier, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="50.0"
                                    Minimum="1.0"
                                    TickFrequency="1.0"
                                    Value="{Binding CircularAmplitudeMultiplier}" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Logarithmic Scale -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Use logarithmic scale for better representation of lower frequencies">
                            <TextBlock DockPanel.Dock="Left" Text="Logarithmic Scale" />
                            <CheckBox
                                DockPanel.Dock="Right"
                                IsChecked="{Binding CircularLogarithmicScale}" />
                        </DockPanel>

                        <!-- Center Position -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Horizontal center position (0.0 to 1.0)">
                            <TextBlock DockPanel.Dock="Left" Text="Center X" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding CircularCenterX, StringFormat='{}{0:F2}'}" />
                                <Slider
                                    Width="120"
                                    Maximum="1.0"
                                    Minimum="0.0"
                                    TickFrequency="0.1"
                                    Value="{Binding CircularCenterX}" />
                            </StackPanel>
                        </DockPanel>

                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Vertical center position (0.0 to 1.0)">
                            <TextBlock DockPanel.Dock="Left" Text="Center Y" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding CircularCenterY, StringFormat='{}{0:F2}'}" />
                                <Slider
                                    Width="120"
                                    Maximum="1.0"
                                    Minimum="0.0"
                                    TickFrequency="0.1"
                                    Value="{Binding CircularCenterY}" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Circle Center Image -->
                        <StackPanel Margin="16,8" Orientation="Vertical">
                            <DockPanel LastChildFill="False" ToolTip.Tip="Optional PNG image for the center of the circular spectrum">
                                <TextBlock DockPanel.Dock="Left" Text="Center Image" />
                                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" Spacing="4">
                                    <Button
                                        Padding="4"
                                        Command="{Binding ClearCircleCenterImageCommand}"
                                        IsEnabled="{Binding CircularCircleCenterFilePath, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                        Theme="{DynamicResource MaterialFlatButton}"
                                        ToolTip.Tip="Clear center image">
                                        <materialIcons:MaterialIcon Kind="Close" Width="16" Height="16" />
                                    </Button>
                                    <Button
                                        Padding="4"
                                        Command="{Binding BrowseCircleCenterImageCommand}"
                                        Theme="{DynamicResource MaterialFlatButton}"
                                        ToolTip.Tip="Browse for center image (PNG)">
                                        <materialIcons:MaterialIcon Kind="Image" Width="16" Height="16" />
                                    </Button>
                                </StackPanel>
                            </DockPanel>
                            <TextBox
                                Margin="0,4,0,0"
                                Text="{Binding CircularCircleCenterFilePath}"
                                Watermark="No center image selected"
                                IsReadOnly="True"
                                TextWrapping="Wrap"
                                MaxLines="2"
                                FontSize="12"
                                Foreground="{DynamicResource MaterialBodyBrush}"
                                Background="Transparent"
                                BorderThickness="0" />
                        </StackPanel>

                        <!-- Base Radius -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Base radius as percentage of screen (inner circle radius)">
                            <TextBlock DockPanel.Dock="Left" Text="Base Radius" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding CircularBaseRadiusPercentage, StringFormat='{}{0:P0}'}" />
                                <Slider
                                    Width="120"
                                    Maximum="0.5"
                                    Minimum="0.05"
                                    TickFrequency="0.05"
                                    Value="{Binding CircularBaseRadiusPercentage}" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Bar Fill Ratio -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Ratio of angular space each bar occupies (0.1 to 1.0)">
                            <TextBlock DockPanel.Dock="Left" Text="Bar Fill Ratio" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding CircularBarFillRatio, StringFormat='{}{0:P0}'}" />
                                <Slider
                                    Width="120"
                                    Maximum="1.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding CircularBarFillRatio}" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Bar Height Scale Factor -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Scale factor for bar height relative to base radius">
                            <TextBlock DockPanel.Dock="Left" Text="Height Scale Factor" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding CircularBarHeightScaleFactor, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="5.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding CircularBarHeightScaleFactor}" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Max Bar Height Ratio -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Maximum bar height as ratio of base radius">
                            <TextBlock DockPanel.Dock="Left" Text="Max Height Ratio" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding CircularMaxBarHeightRatio, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="2.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding CircularMaxBarHeightRatio}" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Mirror Bars -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Draw bars extending both inwards and outwards">
                            <TextBlock DockPanel.Dock="Left" Text="Mirror Bars" />
                            <CheckBox
                                DockPanel.Dock="Right"
                                IsChecked="{Binding CircularMirrorBars}" />
                        </DockPanel>

                        <!-- Enable Glow -->
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Enable glow effect around bars">
                            <TextBlock DockPanel.Dock="Left" Text="Enable Glow" />
                            <CheckBox
                                DockPanel.Dock="Right"
                                IsChecked="{Binding CircularEnableGlow}" />
                        </DockPanel>

                        <!-- Glow Settings (visible when glow is enabled) -->
                        <StackPanel IsVisible="{Binding CircularEnableGlow}" Orientation="Vertical">
                            <DockPanel
                                Margin="16,8"
                                LastChildFill="False"
                                ToolTip.Tip="Alpha intensity of glow effect (0-255)">
                                <TextBlock DockPanel.Dock="Left" Text="Glow Intensity" />
                                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                    <TextBlock Margin="10,0" Text="{Binding CircularGlowIntensity}" />
                                    <Slider
                                        Width="120"
                                        IsSnapToTickEnabled="True"
                                        Maximum="255"
                                        Minimum="0"
                                        TickFrequency="5"
                                        Value="{Binding CircularGlowIntensity}" />
                                </StackPanel>
                            </DockPanel>

                            <DockPanel
                                Margin="16,8"
                                LastChildFill="False"
                                ToolTip.Tip="Radial offset for glow effect">
                                <TextBlock DockPanel.Dock="Left" Text="Glow Offset" />
                                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                    <TextBlock Margin="10,0" Text="{Binding CircularGlowOffset, StringFormat='{}{0:F1}'}" />
                                    <Slider
                                        Width="120"
                                        Maximum="10.0"
                                        Minimum="0.0"
                                        TickFrequency="0.5"
                                        Value="{Binding CircularGlowOffset}" />
                                </StackPanel>
                            </DockPanel>

                            <DockPanel
                                Margin="16,8"
                                LastChildFill="False"
                                ToolTip.Tip="Angular spread for glow effect (in radians)">
                                <TextBlock DockPanel.Dock="Left" Text="Glow Angular Spread" />
                                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                    <TextBlock Margin="10,0" Text="{Binding CircularGlowAngularSpread, StringFormat='{}{0:F3}'}" />
                                    <Slider
                                        Width="120"
                                        Maximum="0.1"
                                        Minimum="0.0"
                                        TickFrequency="0.005"
                                        Value="{Binding CircularGlowAngularSpread}" />
                                </StackPanel>
                            </DockPanel>
                        </StackPanel>
                    </StackPanel>

                    <StackPanel IsVisible="{Binding IsParticleFlowMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="Particle Flow Settings" 
                            FontSize="13" />
                       
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Number of particles in the visualization">
                            <TextBlock DockPanel.Dock="Left" Text="Particle Count" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding ParticleCount}" />
                                <Slider
                                    Width="120"
                                    IsSnapToTickEnabled="True"
                                    Maximum="2000"
                                    Minimum="50"
                                    TickFrequency="50"
                                    Value="{Binding ParticleCount}" />
                            </StackPanel>
                        </DockPanel>

                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Speed multiplier for particle movement">
                            <TextBlock DockPanel.Dock="Left" Text="Particle Speed" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding ParticleSpeed, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="3.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding ParticleSpeed}" />
                            </StackPanel>
                        </DockPanel>
                    </StackPanel>

                    <StackPanel IsVisible="{Binding IsKaleidoscopeWaveMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="Kaleidoscope Settings" 
                            FontSize="13" />
                       
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Number of kaleidoscope segments">
                            <TextBlock DockPanel.Dock="Left" Text="Segments" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding KaleidoscopeSegments}" />
                                <Slider
                                    Width="120"
                                    IsSnapToTickEnabled="True"
                                    Maximum="12"
                                    Minimum="3"
                                    TickFrequency="1"
                                    Value="{Binding KaleidoscopeSegments}" />
                            </StackPanel>
                        </DockPanel>

                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Rotation speed multiplier">
                            <TextBlock DockPanel.Dock="Left" Text="Rotation Speed" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding RotationSpeed, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="5.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding RotationSpeed}" />
                            </StackPanel>
                        </DockPanel>
                    </StackPanel>

                    <StackPanel IsVisible="{Binding IsDNAHelixMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="DNA Helix Settings" 
                            FontSize="13" />
                       
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Radius of the DNA helix structure">
                            <TextBlock DockPanel.Dock="Left" Text="Helix Radius" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding HelixRadius, StringFormat='{}{0:F2}'}" />
                                <Slider
                                    Width="120"
                                    Maximum="1.0"
                                    Minimum="0.1"
                                    TickFrequency="0.05"
                                    Value="{Binding HelixRadius}" />
                            </StackPanel>
                        </DockPanel>

                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Pitch (height per turn) of the DNA helix">
                            <TextBlock DockPanel.Dock="Left" Text="Helix Pitch" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding HelixPitch, StringFormat='{}{0:F1}'}" />
                                <Slider
                                    Width="120"
                                    Maximum="2.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding HelixPitch}" />
                            </StackPanel>
                        </DockPanel>
                    </StackPanel>

                    <StackPanel IsVisible="{Binding IsAuroraMode}" Orientation="Vertical">
                        <TextBlock 
                            Margin="16,16,16,8" 
                            FontWeight="SemiBold" 
                            Text="Aurora Settings" 
                            FontSize="13" />
                       
                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Intensity of the aurora effect">
                            <TextBlock DockPanel.Dock="Left" Text="Aurora Intensity" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding AuroraIntensity, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="2.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding AuroraIntensity}" />
                            </StackPanel>
                        </DockPanel>

                        <DockPanel
                            Margin="16,8"
                            LastChildFill="False"
                            ToolTip.Tip="Speed of aurora flow and movement">
                            <TextBlock DockPanel.Dock="Left" Text="Flow Speed" />
                            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                <TextBlock Margin="10,0" Text="{Binding AuroraFlowSpeed, StringFormat='{}{0:F1}x'}" />
                                <Slider
                                    Width="120"
                                    Maximum="3.0"
                                    Minimum="0.1"
                                    TickFrequency="0.1"
                                    Value="{Binding AuroraFlowSpeed}" />
                            </StackPanel>
                        </DockPanel>
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>
        </Border>

        <Button
            Grid.Row="2"
            Margin="16"
            HorizontalAlignment="Stretch"
            Command="{Binding CloseCommand}"
            Content="CLOSE"
            IsCancel="True"
            IsDefault="True"
            Theme="{DynamicResource MaterialOutlineButton}" />
    </Grid>
</UserControl>